import{n as c,p as k,o as u,c as _,F as h,q as b,s as C,m as x,u as N,v as y,x as g,y as $,z as F,A as J,B as P,C as j,w as d,a as l,b as a,D as n,t as f,E as q}from"./DWKx-0b2.js";import{_ as z}from"./C1Tl7LAG.js";const M={class:"d-flex ga-1"},O={__name:"actions",props:{actions:{type:Function,default:()=>[]}},setup(m){const t=m;return(o,e)=>{const i=c("v-btn"),p=k("tooltip");return u(),_("div",M,[(u(!0),_(h,null,b(t.actions(),r=>C((u(),x(i,N({ref_for:!0},r,{flat:"",rounded:"0",size:"40"}),null,16)),[[p,r.text??void 0]])),256))])}}};class R{constructor(t={}){t={...this.getDefaults(),...t};for(let o in t)this[o]=t[o]}defaults(t={}){return{id:null,...t}}fill(t={}){Object.entries(this.getDefaults()).map(([o,e])=>{this[o]=t[o]??e})}getDefaults(){return{id:null,created_at:null,updated_at:null,...this.defaults()}}collection(){return null}toJson(){let t=this.getDefaults();for(let o in t)t[o]=this[o];return JSON.parse(JSON.stringify(t))}async save(){const t=y(),o=g(t,this.collection());let e=this.toJson();if(console.log(e),e.id){const i=await $(t,o,e.id);console.log(i)}}onSave(){}static search(){return new U(new this)}}class U{constructor(t){this.busy=!1,this.collection=t.collection(),this.params={limit:20},this.data=[]}async submit(){this.busy=!0;const t=y();let e=[g(t,this.collection),F("updatedAt","desc")];const i=J(...e),p=await P(i);this.data=p.docs.map(r=>({id:r.id,...r.data()})),this.busy=!1}}class v extends R{collection(){return"shop_product"}defaults(){return{id:null,sku:"",name:"",thumbnail:null,dimona_slug:"",amount:null,active:null,colors:[],sizes:[],prints:[]}}}const A={class:"d-flex justify-end"},L={class:"pa-0"},G={class:"d-flex justify-end"},K={__name:"shop_product",setup(m){const t=j({edit:new v,list:v.search(),false:!0,openEditor(o){t.edit.fill(o),t.dialog=!0}});return t.list.submit(),(o,e)=>{const i=O,p=c("v-table"),r=c("v-text-field"),w=c("v-btn"),V=c("v-card-text"),D=c("v-card"),S=c("v-form"),B=c("v-dialog"),E=z;return u(),x(E,{name:"admin"},{default:d(()=>[l("div",A,[a(i,{actions:()=>[{icon:"mdi-plus",color:"success",text:"Edit",onClick(){n(t).openEditor({})}}]},null,8,["actions"])]),a(p,null,{default:d(()=>[e[4]||(e[4]=l("colgroup",null,[l("col",{width:"*"}),l("col",{width:"200px"}),l("col",{width:"0"})],-1)),l("tbody",null,[(u(!0),_(h,null,b(n(t).list.data,s=>(u(),_("tr",null,[l("td",null,f(s.name),1),l("td",null,f(s.amount),1),l("td",L,[a(i,{actions:()=>[{icon:"mdi-pen",color:"primary",text:"Edit",onClick(){n(t).openEditor(s)}},{icon:"mdi-delete",color:"error",text:"Delete"}]},null,8,["actions"])])]))),256))])]),_:1}),l("pre",null,"product.list: "+f(n(t).list),1),a(B,{modelValue:n(t).dialog,"onUpdate:modelValue":e[3]||(e[3]=s=>n(t).dialog=s),"max-width":"700",scrollable:""},{default:d(()=>[a(S,{onSubmit:e[2]||(e[2]=q(s=>n(t).edit.save(),["prevent"]))},{default:d(()=>[a(D,null,{default:d(()=>[a(V,null,{default:d(()=>[a(r,{label:"Nome",modelValue:n(t).edit.name,"onUpdate:modelValue":e[0]||(e[0]=s=>n(t).edit.name=s)},null,8,["modelValue"]),a(r,{label:"Valor",modelValue:n(t).edit.amount,"onUpdate:modelValue":e[1]||(e[1]=s=>n(t).edit.amount=s),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"]),l("div",G,[a(w,{text:"Salvar",color:"primary",type:"submit"})]),e[5]||(e[5]=l("div",null,"Produtos",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{K as default};
